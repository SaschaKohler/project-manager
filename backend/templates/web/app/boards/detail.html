{% extends "web/app/layout.html" %}
{% load i18n %}

{% block title %}{{ board.title }} · {% trans "Boards" %} · Project Manager{% endblock %}

{% block content %}
<div class="flex items-start justify-between gap-6">
  <div>
    <div class="text-xs uppercase tracking-wider text-zinc-500">{% trans "Board" %}</div>
    <h1 class="mt-1 text-3xl font-semibold tracking-tight">{{ board.title }}</h1>
  </div>
  <div>
    <a href="{% url 'web:boards' %}" class="rounded-lg border border-zinc-800/70 bg-zinc-900/40 px-3 py-2 text-sm hover:bg-zinc-900/60">
      {% trans "Back" %}
    </a>
  </div>
</div>

<div class="mt-6">
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
    {% for col in columns %}
      <div class="rounded-2xl border border-zinc-800 bg-zinc-900/25 overflow-hidden">
        <div class="px-4 py-3 border-b border-zinc-800/70 flex items-center justify-between">
          <div class="text-sm font-medium text-zinc-200 truncate">{% trans col.title %}</div>
          <div class="text-xs text-zinc-500">{{ col.cards.all|length }}</div>
        </div>

        <div class="p-4 space-y-3">
          <form method="post" action="{% url 'web:board_card_create' board.id %}" class="relative">
            {% csrf_token %}
            <input type="hidden" name="column_id" value="{{ col.id }}" />
            <input name="title" required placeholder="{% trans 'Add idea…' %}"
                   class="w-full rounded-lg bg-zinc-950 border border-zinc-800 pl-3 pr-10 py-2 text-sm outline-none focus:ring-2 focus:ring-indigo-500" />
            <button type="submit" aria-label="{% trans 'Create' %}"
                    class="absolute right-1.5 top-1.5 h-7 w-7 rounded-md bg-indigo-600 hover:bg-indigo-500 transition text-sm font-semibold">
              +
            </button>
          </form>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
            {% for card in col.cards.all %}
              <a href="{% url 'web:board_card_detail' card.id %}" class="block rounded-xl border border-zinc-800/70 bg-zinc-900/35 px-4 py-3 hover:bg-zinc-900/55">
                <div class="font-medium truncate">{{ card.title }}</div>
                {% if card.links.all %}
                  <div class="mt-1 text-xs text-zinc-400">{{ card.links.all|length }} {% trans "links" %}</div>
                {% else %}
                  <div class="mt-1 text-xs text-zinc-500">{% trans "No links" %}</div>
                {% endif %}
              </a>
            {% empty %}
              <div class="md:col-span-2 text-sm text-zinc-500">{% trans "No cards yet." %}</div>
            {% endfor %}
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
